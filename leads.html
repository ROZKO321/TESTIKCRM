<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Coldi CRM — Leads</title>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="icon" href="img/logo.svg" type="image/svg+xml" />
  <script src="js/leads.js" defer></script>
</head>
<body>
  <div class="main-layout">
    <aside class="sidebar">
      <img src="img/logo.svg" alt="Coldi CRM" class="logo-side" />
      <nav>
        <a href="home.html">🏠 Home</a>
        <a href="leads.html" class="active">📞 Leads</a>
        <a href="admin.html" id="settingsLink">⚙️ Settings</a>
        <button id="logout" class="logout-btn">🚪 Logout</button>
      </nav>
    </aside>

    <main class="content">
      <header class="topbar">
        <div class="topbar-header">
          <h1>📋 Leads</h1>

          <!-- 🔔 КОЛОКОЛЬЧИК -->
          <div class="notifications">
            <button id="bellButton">
              <i class="fas fa-bell"></i>
            </button>
            <div id="reminderList" class="reminder-dropdown hidden">
              <h4>Reminders</h4>
              <ul id="reminderItems"></ul>
              <p class="no-reminders">No reminders</p>
            </div>
          </div>
        </div>

        <div class="top-controls">
          <input type="text" id="searchInput" placeholder="Search by name, email or phone..." />
          <select id="statusFilter">
            <option value="">All Statuses</option>
            <option value="new">New</option>
            <option value="no answer">No Answer</option>
            <option value="never answer">Never Answer</option>
            <option value="no interested">No Interested</option>
            <option value="send mail">Send Mail</option>
            <option value="call back">Call Back</option>
            <option value="in work">In Work</option>
            <option value="deposit">Deposit</option>
            <option value="no potential">No Potential</option>
            <option value="murzilka">Murzilka</option>
          </select>
          <select id="affiliateFilter">
            <option value="">All Affiliates</option>
            <!-- JS подгрузит -->
          </select>
        </div>
      </header>

      <section class="leads-list" id="leadsContainer">
        <!-- JS отрисует сюда -->
      </section>

      <footer class="pagination" id="paginationControls">
        <!-- Пагинация -->
      </footer>
    </main>
  </div>

  <div id="reminderToast" class="reminder-toast hidden"></div>

  <!-- ✅ JS для колокольчика -->
  <script>
    const bellButton = document.getElementById("bellButton");
    const reminderDropdown = document.getElementById("reminderList");
    const reminderItems = document.getElementById("reminderItems");
    const noRemindersText = document.querySelector(".no-reminders");

    if (bellButton && reminderDropdown && reminderItems && noRemindersText) {
      bellButton.addEventListener("click", () => {
        reminderDropdown.classList.toggle("hidden");
        reminderItems.innerHTML = "";

        const reminders = JSON.parse(localStorage.getItem("reminders") || "[]");

        if (reminders.length === 0) {
          noRemindersText.style.display = "block";
          return;
        }

        noRemindersText.style.display = "none";

        reminders.forEach(rem => {
          const li = document.createElement("li");
          const link = document.createElement("a");
          link.href = `client-card.html?id=${rem.id}`;
          link.textContent = `${rem.name} — ${rem.date}${rem.comment ? ` (${rem.comment})` : ""}`;
          li.appendChild(link);
          reminderItems.appendChild(li);
        });
      });
    }
  </script>
</body>
</html>
