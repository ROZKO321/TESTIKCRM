<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CRM Dashboard</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" />
</head>
<body class="dashboard-body">

  <div class="sidebar">
    <div class="logo">CRM</div>
    <nav>
      <ul>
        <li class="nav-item active"><i class="fas fa-home"></i><span>Home</span></li>
        <li class="nav-item"><i class="fas fa-user-friends"></i><span>Leads</span></li>
        <li class="nav-item"><i class="fas fa-cogs"></i><span>Admin</span></li>
        <li class="nav-item logout"><i class="fas fa-sign-out-alt"></i><span>Logout</span></li>
      </ul>
    </nav>
  </div>

  <div class="main">
    <header class="main-header">
      <div class="welcome-text">
        <h1>Welcome back, <span id="username-display">Manager</span>!</h1>
        <p>Have a productive day.</p>
      </div>
      <div class="header-icons">

        <!-- ✅ Колокольчик с напоминаниями -->
        <div class="notifications">
          <button id="bellButton">
            <img src="img/bell.svg" alt="Reminders" />
          </button>
          <div id="reminderList" class="reminder-dropdown hidden">
            <h4>Reminders</h4>
            <ul id="reminderItems"></ul>
            <p class="no-reminders">No reminders</p>
          </div>
        </div>

        <select id="lang-select" onchange="translatePage(this.value)">
          <option value="en">EN</option>
          <option value="ru">RU</option>
        </select>
      </div>
    </header>

    <main class="main-content">
      <div class="dashboard-info">
        <p>This is your CRM dashboard. Use the side menu to navigate.</p>
      </div>
    </main>
  </div>

  <script src="translations.js"></script>
  <script>
    // Перевод
    const langSelect = document.getElementById("lang-select");
    translatePage(langSelect.value);

    // ✅ Логика колокольчика
    const bellButton = document.getElementById("bellButton");
    const reminderDropdown = document.getElementById("reminderList");
    const reminderItems = document.getElementById("reminderItems");
    const noRemindersText = document.querySelector(".no-reminders");

    if (bellButton && reminderDropdown && reminderItems && noRemindersText) {
      bellButton.addEventListener("click", () => {
        reminderDropdown.classList.toggle("hidden");
        reminderItems.innerHTML = "";

        const reminders = JSON.parse(localStorage.getItem("reminders") || "[]");

        if (reminders.length === 0) {
          noRemindersText.style.display = "block";
          return;
        }

        noRemindersText.style.display = "none";

        reminders.forEach(rem => {
          const li = document.createElement("li");
          const link = document.createElement("a");
          link.href = `client-card.html?id=${rem.id}`;
          link.textContent = `${rem.name} — ${rem.date}${rem.comment ? ` (${rem.comment})` : ""}`;
          li.appendChild(link);
          reminderItems.appendChild(li);
        });
      });
    }
  </script>
</body>
</html>
